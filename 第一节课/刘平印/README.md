# homework

### 写在开头
目前任职的是一家初创公司，主打视频直播，基本功能已经实现，入职不到1个月，实现了一个送礼物的功能点，以及对原有的业务进行了优化实践，先对主要优化实践内容，做一个记录。

---

#### 项目技术栈
vue-cli + vuex + vue-router + vue-resource(一直没有用axios) + 后台php做接口层

#### 历史原因存在问题
1. 首页白屏时间长，页面加载慢，清空缓存后经常超过20s甚至1min才能加载出来，不清缓存，页面加载超过10s
2. 等待漫长的首页加载之后，页面从首页跳转到直播间，`location.href`改变了，但是页面并没有跳转
3. 很多插件都在报warning
4. vue源码暴露在webpack中
5. 视频直播出现音画不同步

#### 问题分析
1. js加载顺序不对，全都放在head标签中加载了
2. 页面报错多，很多插件都在报warning
3. 资源请求慢
4. 请求的图片资源太多，部分图片太大
5. watch使用不规范，vuex使用不规范
6. 还在使用jquery进行dom节点操作
7. 页面的样式多用定位实现
8. xmpp服务器不稳定（后台正在替换成融云）
9. 视频传输方式采用的是轮询（短期无法和后台配合更换）
10. 音画不同步的问题，需要阅读flv.js源码，才能尝试解决，目前issue中有很多开发者都遇到了这个问题，只有一个说自己解决了，但是解决方案没有给出
11. 以及很多其他的问题
12. 

#### 解决方法
1. 将部分js的请求阶段放到body之后
2. 对插件的调用方式进行优化，不允许warning的存在
3. 将js文件转移到cdn进行读取
4. 图片进行压缩，合并雪碧图的操作放在下一阶段进行
5. 强调代码规范，强调watch，computed，vuex的使用场景
6. 逐步对原jquery相关代码进行修改，实现'去jquery'代码规范
7. 整改css代码，强调样式规范
8. 整改webpack，webpack分模块打包等
9. 强调原生js的使用的重要性
10. 页面跳转的时候，强制阻断加载，直接跳转
11. 

#### 优化结果
1. 首页加载测试几次，DOMContentLoaded:1s左右, Load:1.5s左右
2. 首页加载后，立即点击进入直播间按钮，页面即时跳转
3. flv.min.js目前还在优化阶段，其他的插件的warning已经优化完成
4. 

---
### 下面再聊一点我学习到的七层模型相关的内容
> 七层模型
- 物理层
- 数据链路层
- 网络层
- 传输层
- 会话层
- 表示层
- 应用层

目前单位采用的设备我不是很清楚，貌似是阿里云服务器，性能这方面肯定是越高越好，双机热备，主备，负载均衡，分发，只要实力允许，就做吧

阿里云，貌似在物理层，数据链路层，会话层，传输层（具备海外节点）等方面做的也很好了，主要是采购方面，现在很多的企业都会首选阿里云等云服务器，优点不多说了，安全，稳定，有备份，巴拉巴拉，自己去官网看吧

#### 物理层
中继器，集线器，网线等等

以二进制数据形式在物理设备及链路进行传输

IEEE802.2协议，没有了解

#### 数据链路层
网桥，二层交换机，hub等等

传输有地址的帧以及错误检测功能

ARP协议，ARP作用是寻址

PPP协议，点对点物理链路协议
等

#### 网络层
三层交换机，路由器

传输的是

IP协议，网络互连协议，对网络进行解析


#### 传输层
四层交换机，四层路由器

提供端对端的接口

TCP协议，传输控制协议，是一种面向连接的，可靠的，基于字节流的传输层通信协议

UDP协议，用户数据报协议，是一种不提供可靠性，只是把应用程序传给IP层的数据报发送出去的协议，但是不保证对方都能收到，传输之前不需要和对方产生连接，不存在超时重发机制，因此，速度快

#### 会话层
解除或建立与其他节点的联系

没有协议

#### 表现层
数据格式化，代码转换，数据加密

没有协议

#### 应用层
文件传输，电子邮件，文件服务，虚拟终端等

HTTP协议，超文本传输协议，运输层依赖的是HTTP协议

FTP协议，文件传输协议

TFTP协议，简单文件传输协议

SMTP协议，简单邮件传输协议

DNS协议，域名解析，运输层依赖的是UDP协议

TELNET协议，是internet远程登录服务的标准协议和主要方式

---
### 写在最后
未完待续，学习是一个持续的过程，深耕，会有意想不到的收获